# CLI Integration Testing

This directory contains test projects to validate that the CLI works correctly in different scenarios.

## ğŸ“ Structure

```
test-cli-integration/
â””â”€â”€ react-native-stylesheet/     # Clean Expo project for testing
    â”œâ”€â”€ App.tsx                  # âœ… Base app (committed)
    â”œâ”€â”€ package.json             # âœ… Dependencies (committed)
    â”œâ”€â”€ tsconfig.json            # âœ… TS config (committed)
    â”œâ”€â”€ components/              # âŒ Generated by CLI (git ignored)
    â”œâ”€â”€ styles/                  # âŒ Generated by CLI (git ignored)
    â”œâ”€â”€ lib/                     # âŒ Generated by CLI (git ignored)
    â””â”€â”€ leshi-ui.json            # âŒ Generated by CLI (git ignored)
```

## ğŸ§ª How Testing Works

### 1. Clean Base Project
- **`react-native-stylesheet/`** is a fully functional Expo project
- Contains only basic dependencies: React Native, Expo, TypeScript
- Committed to git as part of the repository

### 2. Local E2E Testing
```bash
cd cli
npm run test:e2e
```

**Test flow:**
1. ğŸ§¹ Cleans previously generated files (preserves Expo base)
2. ğŸš€ Executes `leshi-ui init --yes`
3. ğŸ“¦ Installs ALL available components
4. ğŸ¨ Installs ALL available themes
5. ğŸ” Executes `npx tsc --noEmit` to validate TypeScript
6. âœ… Reports success/failure

### 3. Advantages of this Approach

âœ… **Realistic**: Testing in real Expo project
âœ… **Debuggable**: You can inspect the result in `test-cli-integration/react-native-stylesheet/`
âœ… **Fast**: Doesn't recreate project every time, only cleans generated files
âœ… **Git-friendly**: Base project committed, artifacts ignored
âœ… **Maintainable**: Single stable test project

## ğŸ”§ Manual Testing

You can also use this project for manual testing:

```bash
cd cli/test-cli-integration/react-native-stylesheet

# Clean previous state
rm -rf components/ styles/ lib/ leshi-ui.json

# Test CLI manually
node ../../dist/index.js init --yes
node ../../dist/index.js add component button --yes
node ../../dist/index.js add theme spotify --yes

# Verify TypeScript
npx tsc --noEmit

# Start project to see result
bun start
```

## ğŸ“‹ Available Commands

```bash
# Complete E2E (recommended)
npm run test:e2e

# Individual testing
npm run test:typescript    # TypeScript validation only
npm run test              # Unit tests only
npm run test:all          # Everything together

# Legacy testing (temporary directories)
npm run test:e2e-temp     # Previous approach with /tmp/
```

## ğŸ¯ Development Benefits

1. **Continuous testing**: You can run `npm run test:e2e` every time you change something
2. **Easy debugging**: Result always in the same place
3. **Real validation**: Testing in true Expo project
4. **Clean git**: Only base files committed, artifacts ignored
5. **CI/CD ready**: Works perfectly in automation

This approach ensures that every CLI change is validated in a completely realistic environment.