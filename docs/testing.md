# CLI Integration Testing

This directory contains test projects to validate that the CLI works correctly in different scenarios.

## 📁 Structure

```
test-cli-integration/
└── react-native-stylesheet/     # Clean Expo project for testing
    ├── App.tsx                  # ✅ Base app (committed)
    ├── package.json             # ✅ Dependencies (committed)
    ├── tsconfig.json            # ✅ TS config (committed)
    ├── components/              # ❌ Generated by CLI (git ignored)
    ├── styles/                  # ❌ Generated by CLI (git ignored)
    ├── lib/                     # ❌ Generated by CLI (git ignored)
    └── leshi-ui.json            # ❌ Generated by CLI (git ignored)
```

## 🧪 How Testing Works

### 1. Clean Base Project
- **`react-native-stylesheet/`** is a fully functional Expo project
- Contains only basic dependencies: React Native, Expo, TypeScript
- Committed to git as part of the repository

### 2. Local E2E Testing
```bash
cd cli
npm run test:e2e
```

**Test flow:**
1. 🧹 Cleans previously generated files (preserves Expo base)
2. 🚀 Executes `leshi-ui init --yes`
3. 📦 Installs ALL available components
4. 🎨 Installs ALL available themes
5. 🔍 Executes `npx tsc --noEmit` to validate TypeScript
6. ✅ Reports success/failure

### 3. Advantages of this Approach

✅ **Realistic**: Testing in real Expo project
✅ **Debuggable**: You can inspect the result in `test-cli-integration/react-native-stylesheet/`
✅ **Fast**: Doesn't recreate project every time, only cleans generated files
✅ **Git-friendly**: Base project committed, artifacts ignored
✅ **Maintainable**: Single stable test project

## 🔧 Manual Testing

You can also use this project for manual testing:

```bash
cd cli/test-cli-integration/react-native-stylesheet

# Clean previous state
rm -rf components/ styles/ lib/ leshi-ui.json

# Test CLI manually
node ../../dist/index.js init --yes
node ../../dist/index.js add component button --yes
node ../../dist/index.js add theme spotify --yes

# Verify TypeScript
npx tsc --noEmit

# Start project to see result
bun start
```

## 📋 Available Commands

```bash
# Complete E2E (recommended)
npm run test:e2e

# Individual testing
npm run test:typescript    # TypeScript validation only
npm run test              # Unit tests only
npm run test:all          # Everything together

# Legacy testing (temporary directories)
npm run test:e2e-temp     # Previous approach with /tmp/
```

## 🎯 Development Benefits

1. **Continuous testing**: You can run `npm run test:e2e` every time you change something
2. **Easy debugging**: Result always in the same place
3. **Real validation**: Testing in true Expo project
4. **Clean git**: Only base files committed, artifacts ignored
5. **CI/CD ready**: Works perfectly in automation

This approach ensures that every CLI change is validated in a completely realistic environment.